const writeUsLink=document.querySelector(".block-contacts__link-modal"),writeUsPopup=document.querySelector(".modal-write-us"),writeUsClose=document.querySelector(".modal-write-us__close"),writeUsLogin=document.querySelector(".field__input_login"),writeUsEmail=document.querySelector(".field__input_email"),writeUSMessage=document.querySelector(".field__input_message"),writeUsForm=document.querySelector(".modal-write-us__form");let isStorageSupport=!0,storageLogin="",storageEmail="";try{storageLogin=localStorage.getItem("login"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUsPopup.classList.add("modal_show"),storageLogin?(writeUsLogin.value=storageLogin,writeUsEmail.focus()):writeUsLogin.focus(),storageEmail?(writeUsEmail.value=storageEmail,writeUSMessage.focus()):writeUsEmail.focus()}),writeUsClose.addEventListener("click",function(e){e.preventDefault(),writeUsPopup.classList.remove("modal_show"),writeUsPopup.classList.remove("modal_error")}),writeUsForm.addEventListener("submit",function(e){writeUsLogin.value&&writeUsEmail.value&&writeUSMessage.value?isStorageSupport&&(localStorage.setItem("login",writeUsLogin.value),localStorage.setItem("email",writeUsEmail.value)):(e.preventDefault(),writeUsPopup.classList.remove("modal_error"),writeUsPopup.offsetWidth=writeUsPopup.offsetWidth,writeUsPopup.classList.add("modal_error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&writeUsPopup.classList.contains("modal_show")&&(e.preventDefault(),writeUsPopup.classList.remove("modal_show"),writeUsPopup.classList.remove("modal_error"))});
